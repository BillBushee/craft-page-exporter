!function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t){Craft.CraftpageexporterExportModal=Garnish.Modal.extend({$spinner:null,requestId:0,init:function(e){Craft.CraftpageexporterExportModal.openInstance=this;var t={};t.onHide=this._onHide.bind(this),this.$container=$('<div id="select-fields-modal" class="modal loading"/>').appendTo(Garnish.$bod),this.base(this.$container,$.extend({resizable:!1},t)),this.$container&&(this.$container.velocity("stop"),this.$container.show().css("opacity",1),this.$shade.velocity("stop"),this.$shade.show().css("opacity",1)),this.loadModalContent(e)},loadModalContent:function(e){this._initSpinner(),this.requestId++,Craft.postActionRequest("craft-page-exporter/default/get-export-modal-content",{entryIds:e,requestId:this.requestId,siteId:this.getSiteId()},function(e,t){if("success"===t)if(e.success){if(e.requestId!=this.requestId)return;this.$container.removeClass("loading"),this.$spinner.remove(),this.loaded=!0,this.$container.append(e.modalHtml),Craft.initUiElements(this.$container)}else alert(e.error),this.hide()}.bind(this))},getSiteId:function(){var e=$("input[name=siteId]")[0];return e?e.value:Craft.elementIndex&&Craft.elementIndex.siteId?Craft.elementIndex.siteId:Craft.siteId},_initSpinner:function(){this.$container.addClass("loading"),this.$spinner=$('<div class="spinner centeralign"></div>').appendTo(this.$container);var e=this.$container.height()/2-this.$spinner.height()/2+"px",t=this.$container.width()/2-this.$spinner.width()/2+"px";this.$spinner.css({left:t,top:e,position:"absolute"})},_onHide:function(){return Craft.CraftpageexporterExportModal.openInstance=null,this.$shade.remove(),this.destroy()}},{defaultSettings:{}})},,,,function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"init",value:function(){var e=document.querySelector(".btn.sharebtn, #share-btn");if(null!==e){var t=this.createBtnGroup();this.insertAfter(t,e),this.addMenu(t)}}},{key:"createBtnGroup",value:function(){var e=document.createElement("div");e.classList.add("btngroup","btngroup--share");var t=document.createElement("a");return t.classList.add("btn","export"),t.innerHTML="Export",t.href=this.getBtnExportLink(),e.appendChild(t),e}},{key:"addMenu",value:function(e){var t=document.createElement("div");t.classList.add("btn","menubtn"),e.appendChild(t);var n=document.createElement("div");n.classList.add("menu");var r=document.createElement("ul");n.appendChild(r);var i=document.createElement("li");r.appendChild(i);var a=document.createElement("a");a.innerHTML="Custom export",a.addEventListener("click",this.onBtnExportClick.bind(this)),i.appendChild(a),this.insertAfter(n,t),new Garnish.MenuBtn(t)}},{key:"onBtnExportClick",value:function(){new Craft.CraftpageexporterExportModal(this.getEntryId())}},{key:"getBtnExportLink",value:function(){return Craft.getUrl("page-exporter/export/entry-".concat(this.getEntryId(),"/site-").concat(this.getSiteId())).replace("admin/","")}},{key:"getEntryId",value:function(){return document.getElementsByName("sourceId")[0].value}},{key:"getSiteId",value:function(){var e=$("input[name=siteId]")[0];return e?e.value:Craft.siteId}},{key:"insertAfter",value:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}}]),e}())).init()}]);