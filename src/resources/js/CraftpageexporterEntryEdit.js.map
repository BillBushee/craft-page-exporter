{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/CraftpageexporterEntryEdit.js","webpack:///./js/components/GarnishExportModal.js","webpack:///./js/components/ShareButtonComponent.js","webpack:///./scss/main.scss?d2bf"],"names":["shareButtonComponent","ShareButtonComponent","init","Craft","CraftpageexporterExportModal","Garnish","Modal","extend","$spinner","requestId","entryIds","openInstance","settings","onHide","_onHide","bind","$container","$","appendTo","$bod","base","resizable","velocity","show","css","$shade","loadModalContent","_initSpinner","postActionRequest","response","textStatus","success","removeClass","remove","loaded","append","modalHtml","initUiElements","alert","error","hide","addClass","top","height","left","width","position","destroy","defaultSettings","btnShare","document","querySelector","el","createBtnExport","insertAfter","btnExport","createElement","classList","add","innerHTML","addEventListener","onBtnExportClick","modal","getEntryId","url","getUrl","getSiteId","replace","entryIdInput","getElementsByName","value","referenceNode","parentNode","insertBefore","nextSibling"],"mappings":"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","file":"js/CraftpageexporterEntryEdit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/CraftpageexporterEntryEdit.js\");\n","import AppStyles from '../scss/main.scss'\nimport * as GarnishExportModal from './components/GarnishExportModal';\nimport ShareButtonComponent from './components/ShareButtonComponent';\n\nlet shareButtonComponent = new ShareButtonComponent();\nshareButtonComponent.init();\n","/** global: Craft */\n/** global: Garnish */\n/** global: $ */\n\n/**\n * Craftpageexporter Export Modal\n */\nCraft.CraftpageexporterExportModal = Garnish.Modal.extend(\n  {\n    $spinner: null,\n    requestId: 0,\n\n    /**\n     * Initialize the modal\n     * entryIds is a comma separated list of the entry ids to export\n     *\n     * @string entryIds\n     */\n    init: function(entryIds) {\n      Craft.CraftpageexporterExportModal.openInstance = this;\n      let settings = {};\n      settings.onHide = this._onHide.bind(this);\n      this.$container = $('<div id=\"select-fields-modal\" class=\"modal loading\"/>').appendTo(Garnish.$bod);\n      this.base(this.$container, $.extend({\n        resizable: false\n      }, settings));\n\n      // Cut the flicker, just show the nice person the preview.\n      if (this.$container) {\n        this.$container.velocity('stop');\n        this.$container.show().css('opacity', 1);\n\n        this.$shade.velocity('stop');\n        this.$shade.show().css('opacity', 1);\n      }\n      this.loadModalContent(entryIds);\n    },\n\n    loadModalContent: function(entryIds) {\n      this._initSpinner();\n      this.requestId++;\n\n      Craft.postActionRequest('craft-page-exporter/default/get-export-modal-content', {entryIds: entryIds, requestId: this.requestId}, function(response, textStatus) {\n        if (textStatus === 'success') {\n          if (response.success) {\n            if (response.requestId != this.requestId) {\n              return;\n            }\n            this.$container.removeClass('loading');\n            this.$spinner.remove();\n            this.loaded = true;\n            this.$container.append(response.modalHtml);\n            Craft.initUiElements(this.$container);\n          } else {\n            alert(response.error);\n            this.hide();\n          }\n        }\n      }.bind(this));\n    },\n\n\n    _initSpinner: function () {\n      this.$container.addClass('loading');\n      this.$spinner = $('<div class=\"spinner centeralign\"></div>').appendTo(this.$container);\n      var top = (this.$container.height() / 2 - this.$spinner.height() / 2) + 'px',\n        left = (this.$container.width() / 2 - this.$spinner.width() / 2) + 'px';\n\n      this.$spinner.css({left: left, top: top, position: 'absolute'});\n    },\n\n    _onHide: function () {\n      Craft.CraftpageexporterExportModal.openInstance = null;\n      this.$shade.remove();\n      return this.destroy();\n    },\n  },\n  {\n    defaultSettings: {}\n  }\n);\n","export default class ShareButtonComponent {\n  init() {\n    // Get element we want to insert btn after\n    let btnShare = document.querySelector('.btn.sharebtn');\n    if (btnShare === null) return;\n\n    // Create btn\n    let el = this.createBtnExport();\n\n    // Add btn\n    this.insertAfter(el, btnShare);\n  }\n\n  createBtnExport() {\n    let btnExport = document.createElement('a');\n    btnExport.classList.add('btn');\n    btnExport.innerHTML = \"Export\";\n    btnExport.addEventListener('click', this.onBtnExportClick.bind(this));\n    return btnExport;\n  }\n\n  onBtnExportClick() {\n    var modal = new Craft.CraftpageexporterExportModal(this.getEntryId());\n  }\n\n  getBtnExportLink() {\n    var url = Craft.getUrl(`page-exporter/export/entry-${this.getEntryId()}/site-${this.getSiteId()}`);\n    return url.replace('admin/', '');\n  }\n\n  getEntryId() {\n    let entryIdInput = document.getElementsByName('entryId')[0];\n    return entryIdInput.value;\n  }\n\n  insertAfter(el, referenceNode) {\n    referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\n  }\n}","// extracted by mini-css-extract-plugin"],"sourceRoot":""}